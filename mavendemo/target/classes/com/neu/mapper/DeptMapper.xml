<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.neu.mapper.DeptMapper">
    <select id="getById" resultType="com.neu.po.Dept">
        SELECT * FROM Dept where deptno = #{deptno}
    </select>

    <select id="getAll" resultType="com.neu.po.Dept">
        select * from dept;
    </select>

    <insert id="insert">
        insert into dept(deptno, dname, loc) values (#{deptno},#{dname},#{loc})
    </insert>

    <update id="updateLocById">
        update dept set loc = #{loc} where deptno = #{deptno}
    </update>

    <delete id="deleteById">
        delete from dept where deptno = #{deptno}
    </delete>

<!--    这儿不能直接写dname、loc，而是用arg0、arg1代替，或者param1、param2代替-->
    <select id="find" resultType="com.neu.po.Dept">
        select * from dept where dname = #{dname} and loc = #{loc}
    </select>

    <select id="find2" resultType="com.neu.po.Dept">
        select * from dept where dname = #{dname} and loc = #{loc}
    </select>

    <select id="find3" resultType="com.neu.po.Dept">
        select * from dept where dname = #{dname} and loc = #{loc}
    </select>

    <update id="updateDnameById">
        update dept set dname = #{dname} where deptno = #{deptno}
    </update>


    <!--
        ${}根据列名进行排序，动态列名
        #{}固定参数，不动态
    -->
    <select id="getAllByOrderDname" resultType="com.neu.po.Dept">
        select * FROM dept ORDER BY ${columnName} ASC
    </select>



<!--    记得加上单引号，表示dname的一个值，模糊查询，在sql直接写这条语句的时候，是需要加单引号的-->
    <select id="getByDname" resultType="com.neu.po.Dept">
        select * from dept where dname like '%${dname}%'
    </select>

    <select id="getByDname2" resultType="com.neu.po.Dept">
        select * from dept where dname like #{dname}
    </select>

<!--    动态sql-->
    <select id="search" resultType="com.neu.po.Dept">
        select * from dept
        where 1=1     <!-- 后边的条件都不对，1=1保证sql语句的正确性 -->
        <if test="deptno != null"> and deptno = #{deptno}</if>      <!-- if语句中的deptno字段是Dept中的属性名 -->
        <if test="dname != null">and dname = #{dname}</if>
        <if test="loc != null"> and loc = #{loc}</if>
    </select>

    <select id="search2" resultType="com.neu.po.Dept">
<!--        prefix：前缀，prefixOverrides：前缀覆盖，后边的值为被覆盖的前缀-->
<!--        prefix：如果trim标签中内容不为空串，则添加前缀，否则不添加-->
<!--        prefixOverrides：如果trim标签内容最前面是该属性的值，则被覆盖掉-->
        select * from dept
        <trim prefix="where" prefixOverrides="and">
            <if test="deptno != null"> and deptno = #{deptno}</if>      <!-- if语句中的deptno字段是Dept中的属性名 -->
            <if test="dname != null">and dname = #{dname}</if>
            <if test="loc != null"> and loc = #{loc}</if>
        </trim>
    </select>

    <select id="search3" resultType="com.neu.po.Dept">
        <!--        prefix：前缀，prefixOverrides：前缀覆盖，后边的值为被覆盖的前缀-->
        <!--        prefix：如果trim标签中内容不为空串，则添加前缀，否则不添加-->
        <!--        prefixOverrides：如果trim标签内容最前面是该属性的值，则被覆盖掉-->
        select * from dept
        <where>
            <if test="deptno != null"> and deptno = #{deptno}</if>      <!-- if语句中的deptno字段是Dept中的属性名 -->
            <if test="dname != null">and dname = #{dname}</if>
            <if test="loc != null"> and loc = #{loc}</if>
        </where>
    </select>
</mapper>
